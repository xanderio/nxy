{
  "db": "PostgreSQL",
  "02ccdd5994dc03a27d8ab60d769410589dd9f1f3286245a039076ff43e572485": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "insert into agents (agent_id) values ($1)"
  },
  "3bd52fe6c283e21c1c5b12f1f69114837d1552afa4efab3128242df3a4edc299": {
    "describe": {
      "columns": [
        {
          "name": "agent_id",
          "ordinal": 0,
          "type_info": "Uuid"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "select agent_id from agents where agent_id = $1"
  },
  "47fc82cbeae563a394bf44aabc53ac7f13ee5fc6dc697ca78b1ce981564c2736": {
    "describe": {
      "columns": [
        {
          "name": "flake_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "flake_url",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "flake_revision_id!",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "revision",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "last_modified",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "url",
          "ordinal": 5,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        null,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n        with last_rev as (\n            select flake_id, max(flake_revision_id) as flake_revision_id\n            from flake_revisions\n            group by flake_id\n        )\n        select flakes.flake_id, flake_url, flake_revision_id as \"flake_revision_id!\", revision, last_modified, url\n        from flakes\n        join last_rev using (flake_id)\n        join flake_revisions using (flake_revision_id)\n        "
  },
  "49b4d4c9ac3589e24161c3255d9c7633e1ff8c83b4790db67a962661653eca9c": {
    "describe": {
      "columns": [
        {
          "name": "url",
          "ordinal": 0,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "SELECT url FROM flake_revisions WHERE flake_revision_id = $1"
  },
  "8cd2b188f73142e0f1029ed187f7671f4ed60104e5aa6028345c347ba4e8a42e": {
    "describe": {
      "columns": [
        {
          "name": "flake_revision_id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Timestamptz",
          "Text",
          "Jsonb"
        ]
      }
    },
    "query": "\n            INSERT INTO flake_revisions (flake_id, revision, last_modified, url, metadata)\n            VALUES ($1, $2, $3, $4, $5)\n            RETURNING flake_revision_id\n            "
  },
  "901827a3edfb6b3b09676ea976461d23126921fcc6514213fadc1feaf0131475": {
    "describe": {
      "columns": [
        {
          "name": "flake_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "flake_url",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "flake_revision_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "revision",
          "ordinal": 3,
          "type_info": "Text"
        },
        {
          "name": "last_modified",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "url",
          "ordinal": 5,
          "type_info": "Text"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Timestamptz",
          "Text",
          "Jsonb"
        ]
      }
    },
    "query": "\n            with inserted_flake as (\n                insert into flakes (flake_url)\n                values ($1)\n                returning flake_id, flake_url\n            ), inserted_revision as (\n                insert into flake_revisions (flake_id, revision, last_modified, url, metadata)\n                select flake_id, $2, $3, $4, $5\n                from inserted_flake\n                returning flake_revision_id, revision, last_modified, url\n            )\n            select flake_id, flake_url, flake_revision_id, revision, last_modified, url\n            from inserted_flake, inserted_revision\n        "
  },
  "b852724fcc7c59860c7ba547e4a660bc3d3f43591a43ec939edbc2c16f25152b": {
    "describe": {
      "columns": [
        {
          "name": "flake_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "flake_url",
          "ordinal": 1,
          "type_info": "Text"
        },
        {
          "name": "revision",
          "ordinal": 2,
          "type_info": "Text"
        },
        {
          "name": "last_modified",
          "ordinal": 3,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n        with last_rev as (\n            select flake_id, max(flake_revision_id) as flake_revision_id\n            from flake_revisions\n            group by flake_id\n        )\n        select flakes.flake_id, flake_url, revision, last_modified \n        from flakes\n        join last_rev using (flake_id)\n        join flake_revisions using (flake_revision_id)\n        "
  }
}